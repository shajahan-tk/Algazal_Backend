{"version":3,"file":"workCompletionModel.js","sourceRoot":"","sources":["../../src/models/workCompletionModel.ts"],"names":[],"mappings":";;;AAAA,gCAAgC;AAChC,uCAAoE;AAmBpE,MAAM,yBAAyB,GAAG,IAAI,iBAAM,CAAuB;IACjE,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;IAC7B,UAAU,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,GAAG,EAAE;CAC9C,CAAC,CAAC;AAEH,MAAM,oBAAoB,GAAG,IAAI,iBAAM,CACrC;IACE,OAAO,EAAE;QACP,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,GAAG,EAAE,SAAS;QACd,QAAQ,EAAE,IAAI;KACf;IACD,MAAM,EAAE,CAAC,yBAAyB,CAAC;IACnC,SAAS,EAAE;QACT,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;KACf;CACF,EACD,EAAE,UAAU,EAAE,IAAI,EAAE,CACrB,CAAC;AAEF,6BAA6B;AAC7B,oBAAoB,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;AAC3C,oBAAoB,CAAC,KAAK,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;AAEhC,QAAA,cAAc,GAAG,IAAA,gBAAK,EACjC,gBAAgB,EAChB,oBAAoB,CACrB,CAAC","sourcesContent":["// models/workCompletionModel.ts\r\nimport { Document, Schema, model, Types, ObjectId } from \"mongoose\";\r\n\r\nexport interface IWorkCompletionImage {\r\n  _id: ObjectId;\r\n  title: string;\r\n  imageUrl: string;\r\n  s3Key: string; // Important for managing files in S3\r\n  description?: string;\r\n  uploadedAt: Date;\r\n}\r\n\r\nexport interface IWorkCompletion extends Document {\r\n  project: Types.ObjectId;\r\n  images: IWorkCompletionImage[];\r\n  createdBy: Types.ObjectId;\r\n  createdAt?: Date;\r\n  updatedAt?: Date;\r\n}\r\n\r\nconst workCompletionImageSchema = new Schema<IWorkCompletionImage>({\r\n  title: { type: String, required: true },\r\n  imageUrl: { type: String, required: true },\r\n  s3Key: { type: String, required: true },\r\n  description: { type: String },\r\n  uploadedAt: { type: Date, default: Date.now },\r\n});\r\n\r\nconst workCompletionSchema = new Schema<IWorkCompletion>(\r\n  {\r\n    project: {\r\n      type: Schema.Types.ObjectId,\r\n      ref: \"Project\",\r\n      required: true,\r\n    },\r\n    images: [workCompletionImageSchema],\r\n    createdBy: {\r\n      type: Schema.Types.ObjectId,\r\n      ref: \"User\",\r\n      required: true,\r\n    },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// Indexes for faster queries\r\nworkCompletionSchema.index({ project: 1 });\r\nworkCompletionSchema.index({ createdBy: 1 });\r\n\r\nexport const WorkCompletion = model<IWorkCompletion>(\r\n  \"WorkCompletion\",\r\n  workCompletionSchema\r\n);\r\n"]}