{"version":3,"file":"billModel.js","sourceRoot":"","sources":["../../src/models/billModel.ts"],"names":[],"mappings":"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","sourcesContent":["import { Document, Schema, model, Types } from \"mongoose\";\r\n\r\nexport interface IAttachment extends Document {\r\n  fileName: string;\r\n  fileType: string;\r\n  filePath: string;\r\n}\r\n\r\nexport type BillType =\r\n  | \"general\"\r\n  | \"fuel\"\r\n  | \"mess\"\r\n  | \"vehicle\"\r\n  | \"accommodation\"\r\n  | \"commission\";\r\n\r\nexport interface IBill extends Document {\r\n  billType: BillType;\r\n  billDate: Date;\r\n  paymentMethod: string;\r\n  amount: number;\r\n  attachments: Types.DocumentArray<IAttachment>;\r\n  createdBy: Types.ObjectId;\r\n\r\n  // General Bill Fields\r\n  category?: Types.ObjectId;\r\n  shop?: Types.ObjectId;\r\n  invoiceNo?: string;\r\n  remarks?: string;\r\n\r\n  // Fuel Bill Fields\r\n  description?: string;\r\n  vehicle?: Types.ObjectId;\r\n  kilometer?: number;\r\n  liter?: number;\r\n\r\n  // Vehicle Bill Fields\r\n  purpose?: string;\r\n  vehicles?: Types.ObjectId[];\r\n\r\n  // Accommodation Bill Fields\r\n  roomNo?: string;\r\n  note?: string;\r\n\r\n  createdAt?: Date;\r\n  updatedAt?: Date;\r\n}\r\n\r\nconst attachmentSchema = new Schema<IAttachment>({\r\n  fileName: { type: String, required: true },\r\n  fileType: { type: String, required: true },\r\n  filePath: { type: String, required: true },\r\n});\r\n\r\nconst billSchema = new Schema<IBill>(\r\n  {\r\n    billType: {\r\n      type: String,\r\n      required: true,\r\n      enum: [\r\n        \"general\",\r\n        \"fuel\",\r\n        \"mess\",\r\n        \"vehicle\",\r\n        \"accommodation\",\r\n        \"commission\",\r\n      ],\r\n    },\r\n    billDate: { type: Date, required: true },\r\n    paymentMethod: { type: String, required: true },\r\n    amount: { type: Number, required: true, min: 0 },\r\n    attachments: [attachmentSchema],\r\n    createdBy: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\r\n\r\n    // General Bill Fields\r\n    category: { type: Schema.Types.ObjectId, ref: \"Category\" },\r\n    shop: { type: Schema.Types.ObjectId, ref: \"Shop\" },\r\n    invoiceNo: { type: String, trim: true },\r\n    remarks: { type: String, trim: true },\r\n\r\n    // Fuel Bill Fields\r\n    description: { type: String, trim: true },\r\n    vehicle: { type: Schema.Types.ObjectId, ref: \"Vehicle\" },\r\n    kilometer: { type: Number, min: 0 },\r\n    liter: { type: Number, min: 0 },\r\n\r\n    // Vehicle Bill Fields\r\n    purpose: { type: String, trim: true },\r\n    vehicles: [{ type: Schema.Types.ObjectId, ref: \"Vehicle\" }],\r\n\r\n    // Accommodation Bill Fields\r\n    roomNo: { type: String, trim: true },\r\n    note: { type: String, trim: true },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// Indexes\r\nbillSchema.index({ billType: 1 });\r\nbillSchema.index({ billDate: -1 });\r\nbillSchema.index({ shop: 1 });\r\nbillSchema.index({ vehicle: 1 });\r\nbillSchema.index({ vehicles: 1 });\r\nbillSchema.index({ amount: 1 });\r\nbillSchema.index({ createdBy: 1 });\r\nbillSchema.index({ category: 1 });\r\n\r\nexport const Bill = model<IBill>(\"Bill\", billSchema);\r\n"]}