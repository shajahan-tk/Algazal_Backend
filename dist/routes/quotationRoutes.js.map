{"version":3,"file":"quotationRoutes.js","sourceRoot":"","sources":["../../src/routes/quotationRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,4EAY4C;AAC5C,kEAAwE;AACxE,6CAA0C;AAC1C,gFAA0E;AAE1E,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,GAAG,CAAC,6BAAY,CAAC,CAAC;AAEzB,oCAAoC;AACpC,MAAM,CAAC,IAAI,CACT,GAAG,EACH,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,qCAAe,CAChB,CAAC;AAEF,2BAA2B;AAC3B,MAAM,CAAC,IAAI,CACT,aAAa,EACb,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,eAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,CAAC,EAC1B,2CAAqB,CACtB,CAAC;AAEF,uBAAuB;AACvB,MAAM,CAAC,GAAG,CACR,aAAa,EACb,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,wCAAkB,CACnB,CAAC;AAEF,+DAA+D;AAC/D,MAAM,CAAC,KAAK,CACV,sBAAsB,EACtB,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,0CAAoB,CACrB,CAAC;AACF,qBAAqB;AACrB,MAAM,CAAC,GAAG,CACR,8BAA8B,EAC9B,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,eAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EACtB,2CAAqB,CACtB,CAAC;AAEF,yBAAyB;AACzB,MAAM,CAAC,MAAM,CACX,sBAAsB,EACtB,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,0CAAoB,CACrB,CAAC;AAEF,4BAA4B;AAC5B,MAAM,CAAC,GAAG,CACR,qBAAqB,EACrB,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,2CAAqB,CACtB,CAAC;AAEF,MAAM,CAAC,GAAG,CACR,MAAM,EACN,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,qCAAe,CAChB,CAAC;AAEF,MAAM,CAAC,KAAK,CACV,eAAe,EACf,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC,EACnC,sCAAgB,CACjB,CAAC;AAEF,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC,EAAE,qCAAe,CAAC,CAAC;AAE5E,MAAM,CAAC,IAAI,CACT,iBAAiB,EACjB,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,0CAAkB,CACnB,CAAC;AAEF,MAAM,CAAC,GAAG,CACR,mBAAmB,EACnB,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC,EAC/C,0CAAoB,CACrB,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport {\r\n  createQuotation,\r\n  getQuotationByProject,\r\n  updateQuotation,\r\n  approveQuotation,\r\n  deleteQuotation,\r\n  generateQuotationPdf,\r\n  uploadQuotationImages,\r\n  deleteQuotationImage,\r\n  getQuotationImages,\r\n  updateQuotationImage, // Add this import\r\n  replaceQuotationImage, // Add this import\r\n} from \"../controllers/quotationController\";\r\nimport { authenticate, authorize } from \"../middlewares/authMiddleware\";\r\nimport { upload } from \"../config/multer\";\r\nimport { sendQuotationEmail } from \"../controllers/sendMailPdfController\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.use(authenticate);\r\n\r\n// Create quotation (without images)\r\nrouter.post(\r\n  \"/\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  createQuotation\r\n);\r\n\r\n// Upload images separately\r\nrouter.post(\r\n  \"/:id/images\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  upload.array(\"images\", 10),\r\n  uploadQuotationImages\r\n);\r\n\r\n// Get quotation images\r\nrouter.get(\r\n  \"/:id/images\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  getQuotationImages\r\n);\r\n\r\n// Update image metadata (title, description, relatedItemIndex)\r\nrouter.patch(\r\n  \"/:id/images/:imageId\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  updateQuotationImage\r\n);\r\n// Replace image file\r\nrouter.put(\r\n  \"/:id/images/:imageId/replace\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  upload.single(\"image\"),\r\n  replaceQuotationImage\r\n);\r\n\r\n// Delete quotation image\r\nrouter.delete(\r\n  \"/:id/images/:imageId\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  deleteQuotationImage\r\n);\r\n\r\n// ... other existing routes\r\nrouter.get(\r\n  \"/project/:projectId\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  getQuotationByProject\r\n);\r\n\r\nrouter.put(\r\n  \"/:id\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  updateQuotation\r\n);\r\n\r\nrouter.patch(\r\n  \"/:id/approval\",\r\n  authorize([\"admin\", \"super_admin\"]),\r\n  approveQuotation\r\n);\r\n\r\nrouter.delete(\"/:id\", authorize([\"admin\", \"super_admin\"]), deleteQuotation);\r\n\r\nrouter.post(\r\n  \"/:id/send-email\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  sendQuotationEmail\r\n);\r\n\r\nrouter.get(\r\n  \"/:id/generate-pdf\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\"]),\r\n  generateQuotationPdf\r\n);\r\n\r\nexport default router;"]}