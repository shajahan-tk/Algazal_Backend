{"version":3,"file":"expenseRoutes.js","sourceRoot":"","sources":["../../src/routes/expenseRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,wEAS0C;AAC1C,kEAAwE;AACxE,6CAA0C;AAE1C,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,GAAG,CAAC,6BAAY,CAAC,CAAC;AAEzB,sBAAsB;AACtB,MAAM,CAAC,GAAG,CACR,gCAAgC,EAChC,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,uCAAmB,CACpB,CAAC;AAEF,MAAM,CAAC,IAAI,CACT,qBAAqB,EACrB,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,eAAM,CAAC,MAAM,CAAC;IACZ,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,CAAC,EAAE;IAClC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,EAAE;CACjC,CAAC,EACF,iCAAa,CACd,CAAC;AAEF,MAAM,CAAC,GAAG,CACR,qBAAqB,EACrB,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,sCAAkB,CACnB,CAAC;AAEF,MAAM,CAAC,GAAG,CACR,6BAA6B,EAC7B,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,qCAAiB,CAClB,CAAC;AAEF,MAAM,CAAC,GAAG,CACR,aAAa,EACb,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,kCAAc,CACf,CAAC;AAEF,MAAM,CAAC,GAAG,CACR,aAAa,EACb,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,iCAAa,CACd,CAAC;AAEF,MAAM,CAAC,MAAM,CACX,aAAa,EACb,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,SAAS,CAAC,CAAC,EAC9C,iCAAa,CACd,CAAC;AAEF,MAAM,CAAC,GAAG,CACR,UAAU,EACV,6BAAY,EACZ,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC,EAC1D,sCAAkB,CACnB,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport {\r\n  createExpense,\r\n  getProjectExpenses,\r\n  getExpenseSummary,\r\n  updateExpense,\r\n  deleteExpense,\r\n  getExpenseById,\r\n  getProjectLaborData,\r\n  generateExpensePdf,\r\n} from \"../controllers/expenseController\";\r\nimport { authenticate, authorize } from \"../middlewares/authMiddleware\";\r\nimport { upload } from \"../config/multer\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.use(authenticate);\r\n\r\n// Labor data endpoint\r\nrouter.get(\r\n  \"/project/:projectId/labor-data\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  getProjectLaborData\r\n);\r\n\r\nrouter.post(\r\n  \"/project/:projectId\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  upload.fields([\r\n    { name: \"materials\", maxCount: 1 },\r\n    { name: \"files\", maxCount: 100 },\r\n  ]),\r\n  createExpense\r\n);\r\n\r\nrouter.get(\r\n  \"/project/:projectId\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  getProjectExpenses\r\n);\r\n\r\nrouter.get(\r\n  \"/project/:projectId/summary\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  getExpenseSummary\r\n);\r\n\r\nrouter.get(\r\n  \"/:expenseId\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  getExpenseById\r\n);\r\n\r\nrouter.put(\r\n  \"/:expenseId\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  updateExpense\r\n);\r\n\r\nrouter.delete(\r\n  \"/:expenseId\",\r\n  authorize([\"admin\", \"super_admin\", \"finance\"]),\r\n  deleteExpense\r\n);\r\n\r\nrouter.get(\r\n  \"/:id/pdf\",\r\n  authenticate,\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"finance\"]),\r\n  generateExpensePdf\r\n);\r\n\r\nexport default router;\r\n"]}