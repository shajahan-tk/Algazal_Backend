{"version":3,"file":"estimationRoutes.js","sourceRoot":"","sources":["../../src/routes/estimationRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,8EAS6C;AAC7C,kEAAwE;AAExE,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,GAAG,CAAC,6BAAY,CAAC,CAAC;AAEzB,8CAA8C;AAC9C,MAAM,CAAC,IAAI,CACT,GAAG,EACH,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC,EAC5D,uCAAgB,CACjB,CAAC;AAEF,6BAA6B;AAC7B,MAAM,CAAC,GAAG,CACR,qBAAqB,EACrB,IAAA,0BAAS,EAAC;IACR,OAAO;IACP,aAAa;IACb,UAAU;IACV,WAAW;IACX,iBAAiB;IACjB,QAAQ;CACT,CAAC,EACF,8CAAuB,CACxB,CAAC;AAEF,yBAAyB;AACzB,MAAM,CAAC,GAAG,CACR,MAAM,EACN,IAAA,0BAAS,EAAC;IACR,OAAO;IACP,aAAa;IACb,UAAU;IACV,WAAW;IACX,iBAAiB;IACjB,QAAQ;CACT,CAAC,EACF,2CAAoB,CACrB,CAAC;AAEF,6CAA6C;AAC7C,MAAM,CAAC,KAAK,CACV,YAAY,EACZ,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,iBAAiB,CAAC,CAAC,EAClE,oCAAa,CACd,CAAC;AAEF,oDAAoD;AACpD,MAAM,CAAC,KAAK,CACV,cAAc,EACd,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,iBAAiB,CAAC,CAAC,EACtD,wCAAiB,CAClB,CAAC;AAEF,2CAA2C;AAC3C,MAAM,CAAC,GAAG,CACR,MAAM,EACN,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC,EAC5D,uCAAgB,CACjB,CAAC;AAEF,2CAA2C;AAC3C,MAAM,CAAC,MAAM,CACX,MAAM,EACN,IAAA,0BAAS,EAAC,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC,EAC5D,uCAAgB,CACjB,CAAC;AAEF,MAAM,CAAC,GAAG,CAAC,qBAAqB,EAAE,4CAAqB,CAAC,CAAC;AACzD,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport {\r\n  createEstimation,\r\n  markAsChecked,\r\n  approveEstimation,\r\n  getEstimationsByProject,\r\n  getEstimationDetails,\r\n  updateEstimation,\r\n  deleteEstimation,\r\n  generateEstimationPdf,\r\n} from \"../controllers/estimationController\";\r\nimport { authenticate, authorize } from \"../middlewares/authMiddleware\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.use(authenticate);\r\n\r\n// Create estimation - Engineer/Estimator only\r\nrouter.post(\r\n  \"/\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"estimator\"]),\r\n  createEstimation\r\n);\r\n\r\n// Get estimations by project\r\nrouter.get(\r\n  \"/project/:projectId\",\r\n  authorize([\r\n    \"admin\",\r\n    \"super_admin\",\r\n    \"engineer\",\r\n    \"estimator\",\r\n    \"project_manager\",\r\n    \"client\",\r\n  ]),\r\n  getEstimationsByProject\r\n);\r\n\r\n// Get estimation details\r\nrouter.get(\r\n  \"/:id\",\r\n  authorize([\r\n    \"admin\",\r\n    \"super_admin\",\r\n    \"engineer\",\r\n    \"estimator\",\r\n    \"project_manager\",\r\n    \"client\",\r\n  ]),\r\n  getEstimationDetails\r\n);\r\n\r\n// Mark as checked - Project Manager/Engineer\r\nrouter.patch(\r\n  \"/:id/check\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"project_manager\"]),\r\n  markAsChecked\r\n);\r\n\r\n// Approve/reject estimation - Admin/Project Manager\r\nrouter.patch(\r\n  \"/:id/approve\",\r\n  authorize([\"admin\", \"super_admin\", \"project_manager\"]),\r\n  approveEstimation\r\n);\r\n\r\n// Update estimation - Only before approval\r\nrouter.put(\r\n  \"/:id\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"estimator\"]),\r\n  updateEstimation\r\n);\r\n\r\n// Delete estimation - Only before approval\r\nrouter.delete(\r\n  \"/:id\",\r\n  authorize([\"admin\", \"super_admin\", \"engineer\", \"estimator\"]),\r\n  deleteEstimation\r\n);\r\n\r\nrouter.get(\"/:id/estimation-pdf\", generateEstimationPdf);\r\nexport default router;\r\n"]}